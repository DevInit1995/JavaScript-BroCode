<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /*Async/Await = Aync = faz uma fun√ß√£o retornar uma
      promessa Await = faz uma fun√ß√£o async esperar por
      uma promessa

      Permite que voc√™ escreva c√≥digo ass√≠ncrono de forma s√≠ncrona
      Async n√£o tem par√¢metros resolve ou recect
      Tudo depois de Await √© colocado em uma fila de eventos*/
      /*function walkDog() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            const dogwalked = true;

            if (dogwalked) {
              resolve("You walk the dog üêï‚Äã");
            } else {
              reject("You walk the dog");
            }
          }, 1500);
        });
      }

      function cleanKitchen() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            const kitchenCleaned = true;

            if (kitchenCleaned) {
              resolve("You clean the kitchen üßπ‚Äã");
            } else {
              reject("You DIDN'T clean the kitchen!");
            }
          }, 2500);
        });
      }

      function takeOutTrash() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            const trashTakenOut = true;

            if (trashTakenOut) {
              resolve("You take out the trash ‚ôªÔ∏è‚Äã");
            } else {
              reject("You DIDN'T take out the trasn");
            }
          }, 500);
        });
      }

      async function doChores() {
        try {
          const walkDogResult = await walkDog();
          console.log(walkDogResult);

          const cleanKitchenResult = await cleanKitchen();
          console.log(cleanKitchenResult);

          const takeOutTrashResult = await takeOutTrash();
          console.log(takeOutTrashResult);
        } catch (error) {
          console.log(error);
        }
      }
      doChores();*/

      //torne-se um programador
      //Exemplo-01
      /*setTimeout(function () {
        console.log("Carro lavado");
      }, 8000);

      setTimeout(function () {
        console.log("J√° fiz o passeio com o cachorro");
      }, 1000);*/

      //Exemplo-02 - programa√ß√£o funcional
      /*function resolveProblema() {
        return "sync";
      }

      function resolveProblema2() {
        return "sync2";
      }

      function resolveProblema3() {
        return "sync3";
      }

      var retorno = resolveProblema();
      alert(retorno);

      var retorno2 = resolveProblema2();
      alert(retorno2);

      var retorno3 = resolveProblema3();
      alert(retorno3);

      //programa√ß√£o assincrona

      /*function resolveProblema(callback) {
        callback.call(null, "async");
      }

      function resolveProblema2(callback) {
        callback.call(null, "async2");
      }

      function resolveProblema3(callback) {
        callback.call(null, "async3");
      }

      resolveProblema(function (mensagem) {});
      resolveProblema2();
      resolveProblema3();*/

      //2. Promises
      /*const promessa = new Promise((resolve, reject) => {
        setTimeout(() => {
          resolve("Pronto!");
        }, 1000);
      });

      promessa.then((mensagem) => {
        console.log(mensagem);
      });*/

      //3. async/await
      //√â o jeito mais limpo de escrever c√≥digo ass√≠ncrono
      /*const carregarDados = async () => {
        console.log("Carregando...");

        const dados = await fetch(
          "'http://www.omdbapi.com/?t=Inception&apikey=SUA_API_KEY'"
        );
        const json = await dados.json();

        console.log("Dados recebidos: " + json);
      };

      carregarDados();*/

      //4. Usando setTimeout (simula√ß√£o ass√≠ncrona simples):
      /*let senha = 123;
      console.log();
      senha = parseInt(prompt("Informe a senha: "));
      setTimeout(() => {
        if (senha === 123) {
          alert("Acesso logado.");
        } else {
          alert("Senha incorreta!");
        }
      }, 3000);

      console.log("Inicio");
      setTimeout(() => {
        console.log("Executou depois de 2 segundos");
      }, 2000);
      console.log("Fim");*/

      //5.Usando setInterval (executando de tempos em tempos):
      /*setInterval(() => {
        console.log("Executando a cada 1 segundo");
      }, 1000);*/

      //6.Criando uma Promise b√°sica:
      /*const promessa = new Promise((resolve) => {
        setTimeout(() => {
          resolve("Promessa resolvida!");
        }, 1500);
      });

      promessa.then((msg) => console.log(msg));*/

      //6.Promise com reject:
      /*const promessaErro = new Promise((resolve, reject) => {
        let sucesso = false;

        if (sucesso) {
          resolve("Sucesso!");
        } else {
          reject("Ocorreu um erro.");
        }
      });

      promessaErro
        .then((res) => console.log(res))
        .catch((err) => console.log(err));*/

      //7.Encadeando .then() (Promise chaining):
      /*new Promise((resolve) => {
        setTimeout(() => resolve(5), 1000);
      })
        .then((valor) => valor * 2)
        .then((valor) => valor + 3)
        .then((resultado) => console.log(resultado));
      */

      //8.Fun√ß√£o ass√≠ncrona com async/await:
      /*async function exemplo() {
        const resultado = await Promise.resolve("Com await!");
        console.log(resultado);
      }
      exemplo();*/

      //9.Usando fetch com .then():
      /*fetch("https://jsonplaceholder.typicode.com/posts/1")
        .then((res) => res.json())
        .then((data) => console.log(data));*/

      //10.Usando fetch com async/await:
      /*async function buscarPost() {
        const res = await fetch("https://jsonplaceholder.typicode.com/posts/1");
        const post = await res.json();
        console.log(post);
      }
      buscarPost();*/

      //10.Fun√ß√£o que simula uma tarefa demorada com Promise:
      /*const esperar = (ms) => {
        return new Promise((resolve) => setTimeout(resolve, ms));
      };

      async function executar() {
        console.log("Esperando...");
        await esperar(2000);
        console.log("Terminou a espera!");
      }
      executar();*/

      //11.Promise com finally():
      /*Promise.resolve("OK")
        .then((res) => console.log(res))
        .finally(() => console.log("Sempre executa no final"));*/

      //12.Tratando erro com try/catch e async/await:
      /*async function exemploErro() {
        try {
          const res = await fetch("https://api.invalida.com");
          const dados = await res.json();
          console.log(dados);
        } catch (erro) {
          console.log("Erro ao buscar dados: " + erro);
        }
      }
      exemploErro();*/

      //13.Usando .all() para m√∫ltiplas Promises:
      /*Promise.all([
        fetch("https://jsonplaceholder.typicode.com/posts/1").then((r) =>
          r.json()
        ),
        fetch("https://jsonplaceholder.typicode.com/posts/2").then((r) =>
          r.json()
        ),
      ]).then((resultados) => {
        console.log("Posts:" + resultados);
      });*/

      //14.Usando Promise.race() (retorna o mais r√°pido)
      /*const p1 = new Promise((r) => setTimeout(() => r("Primeira"), 3000));
      const p2 = new Promise((r) => setTimeout(() => r("Segunda"), 1000));

      Promise.race([p1, p2]).then((res) => console.log(res));*/

      //15.Delay com fun√ß√£o ass√≠ncrona reutiliz√°vel
      /*const delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));

      async function animarTexto() {
        console.log("Carregando...");
        await delay(1000);
        console.log("Quase l√°...");
        await delay(3000);
        console.log("Pronto!");
      }
      animarTexto();*/

      //16.Exemplo pr√°tico simulando carregamento de API:
      async function carregarUsuario(id) {
        console.log("Buscando usu√°rio...");
        const resposta = await fetch(
          `https://jsonplaceholder.typicode.com/users/${id}`
        );
        const usuario = await resposta.json();
        console.log("Usu√°rio encontrado: " + usuario.name);
      }
      carregarUsuario(3);
    </script>
  </body>
</html>
